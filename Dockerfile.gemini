# Use Node.js as a base image
FROM node:20

# Install supplementary tools
RUN apt-get update && \
    apt-get install -y vim nano mc htop bat screen tmux jq && \
    rm -rf /var/lib/apt/lists/*

# Install the Gemini CLI tool globally
RUN npm install -g @google/gemini-cli

# Set the default working directory
WORKDIR /workspace

# Ensure /usr/local/bin exists
RUN install -d -m 0755 /usr/local/bin
# Add the tmux layout script into the image
ADD scripts/start-tmux-layout /usr/local/bin/start-tmux-layout
RUN chmod +x /usr/local/bin/start-tmux-layout

# Make it the default when no args are provided (uses base entrypoint: bash --login "$@")
CMD ["-lc","start-tmux-layout"]
